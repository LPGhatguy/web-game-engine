/* Serial Broadcaster v1.0.0
 * Broadcasts events to subscribers one at a time, in order.
 */

import Broadcaster from "./Broadcaster";

export default class SerialBroadcaster extends Broadcaster {
	fire(args: any[] = []): Promise<void> {
		let promise = new Promise<void>(resolve => resolve());

		this.subscribers.forEach((sub) => {
			promise = promise.then(() => sub.apply(undefined, args));
		});

		return promise;
	}
}