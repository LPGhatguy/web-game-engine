export default class DynamicF32 {
	internal: Float32Array;

	private pointer: number = 0;

	constructor(length: number) {
		this.internal = new Float32Array(length);
	}

	resize(length: number) {
		let old = this.internal;
		let internal = new Float32Array(length);
		let len = Math.min(old.length, internal.length);

		for (let i = 0; i < len; i++) {
			internal[i] = old[i];
		}

		this.internal = internal;
	}

	getNextSize() {
		let len = this.internal.length;
		let exp = Math.floor(Math.log(len) / Math.log(2));

		return Math.pow(2, exp + 1);
	}

	set(index: number, value: number) {
		this.internal.set(index, value);
	}

	push(value: number) {
		let next = this.pointer++;

		if (next > this.internal.length - 1) {
			this.resize(this.getNextSize());
		}

		this.internal[next] = value;
	}

	append(array: number[]) {
		for (let v of array) {
			console.log(v);
			this.push(v);
		}
	}

	setPointer(index: number) {
		this.pointer = index;
	}
}