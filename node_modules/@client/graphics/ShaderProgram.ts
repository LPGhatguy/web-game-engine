import Engine from "@client/Engine";
import Shader from "./Shader";

export default class ShaderProgram {
	program: WebGLProgram;
	private engine: Engine;

	constructor(engine: Engine) {
		this.engine = engine;

		this.program = engine.gl.createProgram();
	}

	attach(...shaders: WebGLShader[]) {
		for (let shader of shaders) {
			this.engine.gl.attachShader(this.program, shader);
		}
	}

	link() {
		this.engine.gl.linkProgram(this.program);

		if (!this.engine.gl.getProgramParameter(this.program, this.engine.gl.LINK_STATUS)) {
			throw new Error("Couldn't initialize shaders!");
		}
	}

	use() {
		this.engine.gl.useProgram(this.program);
	}
}